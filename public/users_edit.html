<!--
	Pages needed: 
		list of all accounts user follows and followers
		list of all users who liked a post
-->

<!DOCTYPE html>
<html lang="en">
	<head>
		<title>CHOCO Social Media</title>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Twitter clone">
		<meta name="author" content="Joshua Lim Kyu Sung Kwon">

		<link rel="stylesheet" href="/public/index.css">
		<link rel="icon" type="image/x-icon">
	</head>
	<body id="post_body" class="body">
		<div class="header">
			<nav class="nav">
				<ul class="nav_ul">
					<h1>LINKS</h1>
					<li class="nav_li"><a class="nav_link" href="/posts">Posts</a></li>
					<li class="nav_li"><a class="nav_link" href="/hashtags">Hashtag</a></li>
					<li class="nav_li"><a class="nav_link" href="/users">Users</a></li>
				</ul>
			</nav>
			<br>
			<div class="">
				<h3>Information</h3>
				<p>
					- Enter a text and date with an existing user_ID to create a post
					<br>
					- Click on the number of likes to see users who liked the post
				</p>
			</div>
		</div>
        <div class="sec_body">
			<div id="content_div" class="content">
				<label>ID</label>
				<input type="text" id="idField" disabled = true>
				<label>Username</label>
				<input type="text" id="userNameField" onchange='EnableApply()'>
				<label>Email</label>
				<input type="text" id="emailField" onchange='EnableApply()'>
				<label>Password</label>
				<input type="text" id="passwordField" onchange='EnableApply()'>
				<button id="changesButton">Apply Changes</button>
			</div>
		</div>
	</body>
	<script>
		changesButton.disabled = true;
		function EnableApply(){
			changesButton.disabled = false;
		}
	</script>
    <script type="module">

		import {GetUserData, UpdateUserData} from '../../public/index.js'
        let userId = location.href.split('/').pop();
		idField.value = userId;
		GetUserData(userId, function(results){
			console.log(results);
			userNameField.value = results[0].display_name;
			emailField.value = results[0].email;
			passwordField.value = results[0].password;
		})

		changesButton.addEventListener('click', (e) => {
			UpdateUserData(userId, userNameField.value, emailField.value, passwordField.value);
			changesButton.disabled = true;
		});

    </script>

</html>